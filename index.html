<!DOCTYPE html>
<html lang="he" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gear List</title>
<link rel="apple-touch-icon" href="data:image/png;base64,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">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Gear List">
<script>
(function(){
  var manifest = {
    name: 'Gear List',
    short_name: 'Gear List',
    start_url: '.',
    display: 'standalone',
    background_color: '#131316',
    theme_color: '#131316',
    icons: [
      { src: 'data:image/png;base64,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', sizes: '192x192', type: 'image/png' },
      { src: 'data:image/png;base64,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', sizes: '512x512', type: 'image/png' }
    ]
  };
  var blob = new Blob([JSON.stringify(manifest)], {type: 'application/manifest+json'});
  var url = URL.createObjectURL(blob);
  var link = document.createElement('link');
  link.rel = 'manifest';
  link.href = url;
  document.head.appendChild(link);
})();
</script>
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
body { background: #0D0D0F; color: #F0EDE8; font-family: 'DM Mono','Courier New',monospace; max-width: 600px; margin: 0 auto; min-height: 100vh; padding-bottom: 80px; }

#header { background: #131316; padding: 16px 16px 12px; position: sticky; top: 0; z-index: 20; border-bottom: 1px solid #222; }
.header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.logo { font-size: 20px; font-weight: 700; letter-spacing: 2px; color: #FF6B35; }
.header-btns { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; justify-content: flex-end; }
.btn-orange { background: #FF6B35; color: #0D0D0F; border: none; border-radius: 8px; padding: 8px 14px; font-weight: 700; font-size: 12px; cursor: pointer; letter-spacing: 1px; font-family: inherit; transition: transform 0.1s; }
.btn-orange:active { transform: scale(0.95); }
.btn-ghost { background: transparent; color: #aaa; border: 1px solid #333; border-radius: 8px; padding: 8px 12px; font-size: 12px; cursor: pointer; font-family: inherit; transition: all 0.2s; letter-spacing: 1px; }
.btn-ghost:hover { border-color: #555; color: #ddd; }
.btn-purple { background: #A78BFA22; color: #A78BFA; border: 1px solid #A78BFA44; border-radius: 8px; padding: 8px 12px; font-size: 12px; cursor: pointer; font-family: inherit; letter-spacing: 1px; }
.admin-badge { font-size: 10px; background: #FF6B3522; color: #FF6B35; border: 1px solid #FF6B3544; border-radius: 20px; padding: 3px 10px; letter-spacing: 1px; cursor: pointer; }
.subtitle { font-size: 11px; color: #555; letter-spacing: 1px; margin-bottom: 10px; }
.progress-bg { height: 3px; background: #222; border-radius: 2px; margin-bottom: 12px; }
.progress-fill { height: 100%; background: linear-gradient(90deg,#FF6B35,#00C9A7); border-radius: 2px; transition: width 0.4s; }
.top-controls { display: flex; gap: 8px; }
#search { flex: 2; background: #1A1A1F; border: 1px solid #2A2A30; border-radius: 9px; padding: 9px 12px; color: #F0EDE8; font-size: 13px; font-family: inherit; outline: none; }
#search::placeholder { color: #444; }
#filterCat { flex: 1; background: #1A1A1F; border: 1px solid #2A2A30; border-radius: 9px; padding: 9px 10px; color: #aaa; font-size: 12px; font-family: inherit; outline: none; }
#filterCat option { background: #1A1A1F; }

#tabs { display: flex; background: #131316; border-bottom: 1px solid #222; padding: 0 12px; position: sticky; top: 135px; z-index: 15; }
.tab { padding: 10px 14px; font-size: 11px; font-family: inherit; cursor: pointer; border: none; background: transparent; color: #555; letter-spacing: 1px; border-bottom: 2px solid transparent; transition: all 0.2s; }
.tab.active { color: #FF6B35; border-bottom-color: #FF6B35; }

#list { padding: 10px 12px; }
.empty { text-align: center; color: #444; padding: 40px; font-size: 14px; }

/* ITEM CARD */
.item-card { background: #131316; border: 1px solid #222; border-radius: 14px; margin-bottom: 10px; overflow: visible; transition: border-color 0.2s, box-shadow 0.2s, opacity 0.2s; }

.item-card:hover { border-color: #2A2A30; }
.item-card.dragging { opacity: 0.4; }
.item-card.drag-over { border-color: #FF6B35; box-shadow: 0 0 0 2px #FF6B3544; }

.card-header { display: flex; justify-content: space-between; align-items: center; padding: 12px 14px 8px; gap: 8px; }
.card-title { display: flex; align-items: center; gap: 8px; flex: 1; min-width: 0; }

.drag-handle { color: #444; font-size: 18px; cursor: grab; padding: 4px 6px; flex-shrink: 0; display: none; user-select: none; line-height:1; }
.drag-handle:active { cursor: grabbing; }
.admin-mode .drag-handle { display: block; }
.admin-mode .item-card { cursor: grab; }
.admin-mode .item-card.dragging { cursor: grabbing; }
.mobile-only { display: none !important; }
.desktop-only { display: inline !important; }
.is-touch .mobile-only { display: flex !important; }
.is-touch .desktop-only { display: none !important; }

.item-name { font-weight: 600; font-size: 14px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.item-name.editable { cursor: pointer; border-bottom: 1px dashed #444; }
.item-name.editable:hover { color: #FF6B35; border-bottom-color: #FF6B35; }
.cat-tag { font-size: 9px; padding: 2px 7px; border-radius: 20px; font-weight: 600; letter-spacing: 0.5px; flex-shrink: 0; }
.cat-tag.editable { cursor: pointer; }
.cat-tag.editable:hover { opacity: 0.7; }

.card-actions { display: flex; gap: 5px; flex-shrink: 0; }
.del-btn { width: 26px; height: 26px; border-radius: 6px; border: none; background: transparent; color: #333; font-size: 12px; cursor: pointer; font-family: inherit; transition: color 0.2s; }
.del-btn:hover { color: #ff4444; }

.stock-pills { display: flex; gap: 6px; padding: 0 14px 12px; align-items: center; flex-wrap: wrap; }
.pill { display: flex; flex-direction: column; align-items: center; background: #1A1A1F; border: 1px solid #2A2A30; border-radius: 8px; padding: 5px 10px; min-width: 50px; }
.pill .plabel { font-size: 8px; color: #555; letter-spacing: 0.8px; margin-bottom: 2px; }
.pill .pval { font-size: 17px; font-weight: 700; line-height: 1; }
.pill.p-stock .pval { color: #777; }
.pill.p-free .pval { color: #008000; font-weight: 800; }
.pill.p-out .pval { color: #ff0000; font-weight: 800; }
.stock-edit { display: flex; gap: 4px; margin-left: 2px; }

.sm-btn { width: 30px; height: 30px; border-radius: 7px; border: 1px solid #2A2A30; background: #1A1A1F; color: #F0EDE8; font-size: 17px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-family: inherit; font-weight: 700; transition: all 0.1s; line-height: 1; }
.sm-btn:active { background: #FF6B35 !important; color: #0D0D0F !important; border-color: #FF6B35 !important; transform: scale(0.9); }

.takers-section { border-top: 1px solid #1A1A1F; padding: 8px 14px 12px; }
.takers-title { font-size: 9px; color: #555; letter-spacing: 1px; margin-bottom: 8px; }
.taker-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 6px; gap: 8px; }
.taker-name { font-size: 12px; color: #ccc; flex: 1; }
.taker-qty { display: flex; align-items: center; gap: 5px; }
.taker-count { font-size: 15px; font-weight: 700; min-width: 22px; text-align: center; }
.assign-select { background: #0D0D0F; border: 1px solid #2A2A30; border-radius: 7px; padding: 6px 8px; color: #666; font-size: 11px; font-family: inherit; outline: none; flex: 1; }

/* PEOPLE TAB */
.person-card { background: #131316; border: 1px solid #222; border-radius: 14px; margin-bottom: 10px; overflow: hidden; }
.person-header { display: flex; justify-content: space-between; align-items: center; padding: 12px 14px; }
.person-name-big { font-size: 15px; font-weight: 700; }
.person-badge { font-size: 11px; color: #FF6B35; background: #FF6B3522; border: 1px solid #FF6B3544; border-radius: 20px; padding: 2px 10px; }
.person-items { padding: 0 14px 12px; border-top: 1px solid #1A1A1F; }
.person-item-row { display: flex; justify-content: space-between; align-items: center; padding: 7px 0; border-bottom: 1px solid #1A1A1F; }
.person-item-row:last-child { border-bottom: none; }
.return-btn { font-size: 11px; background: transparent; border: 1px solid #333; color: #aaa; border-radius: 6px; padding: 3px 8px; cursor: pointer; font-family: inherit; transition: all 0.2s; }
.return-btn:hover { border-color: #00C9A7; color: #00C9A7; }

/* LOG */
.log-day { padding: 0 14px; margin-bottom: 16px; }
.log-day-title { font-size: 10px; color: #555; letter-spacing: 1.5px; padding: 6px 0; border-bottom: 1px solid #1A1A1F; margin-bottom: 8px; }
.log-entry { display: flex; align-items: flex-start; gap: 10px; padding: 7px 0; border-bottom: 1px solid #111; }
.log-entry:last-child { border-bottom: none; }
.log-time { font-size: 11px; color: #555; flex-shrink: 0; min-width: 42px; }
.log-dot { width: 8px; height: 8px; border-radius: 50%; margin-top: 3px; flex-shrink: 0; }
.log-body { flex: 1; }
.log-person { font-size: 12px; font-weight: 600; }
.log-action { font-size: 11px; color: #888; margin-top: 1px; }
.log-qty-out { color: #FF6B35; }
.log-qty-in { color: #00C9A7; }
.log-qty-admin { color: #A78BFA; }

#footer { position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 600px; background: #131316; border-top: 1px solid #222; padding: 10px 16px; display: none; }
.reset-btn { width: 100%; background: transparent; border: 1px solid #333; color: #aaa; border-radius: 10px; padding: 11px; font-size: 13px; cursor: pointer; font-family: inherit; letter-spacing: 1px; }
.reset-btn:hover { border-color: #555; color: #ddd; }

/* MODALS */
.overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 100; display: none; align-items: flex-end; justify-content: center; }
.overlay.show { display: flex; }
.modal { background: #1A1A1F; border-radius: 20px 20px 0 0; padding: 22px 18px 34px; width: 100%; max-width: 600px; border-top: 1px solid #2A2A30; max-height: 85vh; overflow-y: auto; }
.modal-title { font-size: 17px; font-weight: 700; margin-bottom: 6px; letter-spacing: 1px; }
.modal-sub { font-size: 11px; color: #555; margin-bottom: 18px; }
.modal-label { font-size: 10px; color: #666; margin-bottom: 5px; letter-spacing: 0.8px; }
.modal input, .modal select { width: 100%; background: #0D0D0F; border: 1px solid #2A2A30; border-radius: 9px; padding: 11px 13px; color: #F0EDE8; font-size: 14px; font-family: inherit; outline: none; margin-bottom: 10px; }
.modal input::placeholder { color: #444; }
.modal select option { background: #1A1A1F; }
.qty-modal-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 14px; }
.qty-row { display: flex; align-items: center; gap: 6px; }
.qty-num { font-size: 20px; font-weight: 700; min-width: 30px; text-align: center; }
.modal-btns { display: flex; gap: 10px; margin-top: 8px; }
.btn-cancel { flex: 1; background: transparent; border: 1px solid #333; color: #aaa; border-radius: 10px; padding: 12px; font-size: 13px; cursor: pointer; font-family: inherit; }
.btn-confirm { flex: 2; background: #FF6B35; color: #0D0D0F; border: none; border-radius: 10px; padding: 12px; font-weight: 700; font-size: 14px; cursor: pointer; font-family: inherit; }
.people-list .person-row { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #222; }

/* PIN */
.pin-row { display: flex; gap: 10px; justify-content: center; margin: 20px 0; }
.pin-digit { width: 52px; height: 62px; background: #0D0D0F; border: 2px solid #2A2A30; border-radius: 12px; font-size: 28px; font-weight: 700; text-align: center; color: #F0EDE8; font-family: inherit; outline: none; transition: border-color 0.2s; -webkit-text-security: disc; }
.pin-digit:focus { border-color: #FF6B35; }
.pin-error { color: #ff4444; font-size: 12px; text-align: center; margin-top: -10px; margin-bottom: 10px; min-height: 18px; }

/* INLINE EDIT */
.inline-edit { background: #0D0D0F; border: 1px solid #FF6B35; border-radius: 6px; padding: 3px 8px; color: #F0EDE8; font-size: 14px; font-weight: 600; font-family: inherit; outline: none; width: 160px; }

/* CAT DROPDOWN */
.cat-dropdown { position: absolute; background: #1A1A1F; border: 1px solid #2A2A30; border-radius: 10px; padding: 6px; z-index: 200; min-width: 160px; box-shadow: 0 8px 24px rgba(0,0,0,0.5); }
.cat-dropdown-item { padding: 8px 12px; border-radius: 7px; cursor: pointer; font-size: 12px; display: flex; align-items: center; gap: 8px; transition: background 0.1s; }
.cat-dropdown-item:hover { background: #2A2A30; }
.cat-dropdown-sep { height: 1px; background: #2A2A30; margin: 4px 0; }
.cat-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }

/* CATEGORIES SECTION in settings */
.cat-list-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #222; gap: 8px; }
.cat-list-item:last-child { border-bottom: none; }
.cat-color-dot { width: 14px; height: 14px; border-radius: 50%; margin-right: 8px; display: inline-block; flex-shrink: 0; }

/* MOVE BUTTONS */
.move-btns { display: flex; flex-direction: column; gap: 3px; flex-shrink: 0; }
.move-btn { width: 40px; height: 36px; border-radius: 8px; border: 1px solid #2A2A30; background: #1A1A1F; color: #888; font-size: 15px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-family: inherit; transition: all 0.1s; touch-action: manipulation; }
.move-btn:active { background: #FF6B35 !important; color: #0D0D0F !important; border-color: #FF6B35 !important; transform: scale(0.92); }

/* PROJECT FIELD */
.project-row { padding: 6px 14px 12px; border-top: 1px solid #1A1A1F; }
.project-input { width: 100%; background: #0D0D0F; border: 1px solid #2A2A30; border-radius: 8px; padding: 9px 12px; color: #aaa; font-size: 13px; font-family: inherit; outline: none; }
.project-input:focus { border-color: #FF6B35; color: #F0EDE8; }
.project-input::placeholder { color: #444; }
.project-label { font-size: 9px; color: #444; letter-spacing: 1px; margin-bottom: 5px; }

/* MOBILE OPTIMIZATIONS */
@media (max-width: 600px) {
  body { font-size: 15px; }
  .logo { font-size: 18px; }
  .tab { padding: 12px 12px; font-size: 12px; letter-spacing: 0; }
  .item-name { font-size: 15px; }
  .cat-tag { font-size: 10px; padding: 3px 8px; }
  .pill .pval { font-size: 20px; }
  .pill .plabel { font-size: 9px; }
  .pill { min-width: 54px; padding: 6px 10px; }
  .sm-btn { width: 38px; height: 38px; font-size: 20px; }
  .taker-count { font-size: 18px; }
  .taker-name { font-size: 14px; }
  .person-name-big { font-size: 17px; }
  .person-badge { font-size: 12px; }
  .btn-ghost, .btn-orange, .btn-purple { padding: 9px 12px; font-size: 12px; }
  .modal { padding: 24px 16px 40px; }
  .modal input, .modal select { font-size: 16px; padding: 13px; }
  .pin-digit { width: 58px; height: 68px; font-size: 32px; }
  .assign-select { font-size: 14px; padding: 9px 10px; }
  .return-btn { font-size: 13px; padding: 6px 12px; }
  #list { padding: 8px 10px; }
  .card-header { padding: 14px 14px 8px; }
  .takers-section { padding: 10px 14px 14px; }
  .log-person { font-size: 14px; }
  .log-action { font-size: 12px; }
  .log-time { font-size: 12px; min-width: 46px; }
}
</style>
</head>
<body>

<div id="header">
  <div class="header-top">
    <div class="logo" id="appLogo" onclick="setTab('gear')" style="cursor:pointer;display:flex;align-items:center;gap:8px">
      <img src="data:image/png;base64,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" style="width:36px;height:36px;object-fit:contain;border-radius:50%">
      <span id="appLogoText">GEAR LIST</span>
    </div>
    <div class="header-btns">
      <span id="adminBadge" class="admin-badge" onclick="handleAdminBadge()" style="display:none">üîì ADMIN</span>
      <button class="btn-ghost" id="adminBtn" onclick="openPinModal()">üîê ADMIN</button>
      <button class="btn-purple" id="manageCatsBtn" onclick="openCatsModal()" style="display:none">üè∑ CATS</button>
      <button class="btn-ghost" id="peopleBtnHeader" onclick="openPeopleModal()" style="display:none">üë• PEOPLE</button>
      <button class="btn-orange" id="addItemBtn" onclick="openAddItemModal()" style="display:none">+ ITEM</button>
    </div>
  </div>
  <div style="display:flex;align-items:center;gap:8px;margin-bottom:10px">
  <div class="subtitle" id="subtitle" style="margin-bottom:0">‚Äî</div>
  <div id="liveIndicator" style="display:flex;align-items:center;gap:4px;font-size:10px;color:#555">
    <div id="liveDot" style="width:6px;height:6px;border-radius:50%;background:#333"></div>
    <span id="liveText">connecting...</span>
  </div>
</div>
  <div class="progress-bg"><div class="progress-fill" id="progress" style="width:0%"></div></div>
  <div class="top-controls">
    <input id="search" type="text" placeholder="üîç  Search gear..." oninput="render()">
    <select id="filterCat" onchange="render()"><option value="All">All</option></select>
  </div>
</div>

<div id="tabs">
  <button class="tab active" onclick="setTab('gear')" id="tab-gear">GEAR</button>
  <button class="tab" onclick="setTab('people')" id="tab-people">BY PERSON</button>
  <button class="tab" onclick="setTab('log')" id="tab-log">LOG</button>
</div>

<div id="list"></div>

<div id="footer">
  <button class="reset-btn" onclick="resetAll()">‚Ü∫ Return all gear ‚Äî end of day</button>
</div>

<!-- PIN MODAL -->
<div class="overlay" id="overlayPin" onclick="closePinModal()">
  <div class="modal" onclick="event.stopPropagation()">
    <div class="modal-title" id="pinTitle">üîê Admin Login</div>
    <div class="modal-sub" id="pinSub">Enter PIN to access admin controls</div>
    <div class="pin-row">
      <input class="pin-digit" id="p0" maxlength="1" type="password" inputmode="numeric" oninput="pinInput(0)" onkeydown="pinKey(event,0)">
      <input class="pin-digit" id="p1" maxlength="1" type="password" inputmode="numeric" oninput="pinInput(1)" onkeydown="pinKey(event,1)">
      <input class="pin-digit" id="p2" maxlength="1" type="password" inputmode="numeric" oninput="pinInput(2)" onkeydown="pinKey(event,2)">
      <input class="pin-digit" id="p3" maxlength="1" type="password" inputmode="numeric" oninput="pinInput(3)" onkeydown="pinKey(event,3)">
    </div>
    <div class="pin-error" id="pinError"></div>
    <div class="modal-btns">
      <button class="btn-cancel" onclick="closePinModal()">Cancel</button>
      <button class="btn-confirm" onclick="submitPin()">Enter</button>
    </div>
    <div id="changePinSection" style="display:none;margin-top:20px;border-top:1px solid #222;padding-top:16px">
      <div class="modal-label">CHANGE PIN</div>
      <div class="pin-row" style="margin:12px 0">
        <input class="pin-digit" id="np0" maxlength="1" type="password" inputmode="numeric" oninput="newPinInput(0)" onkeydown="newPinKey(event,0)">
        <input class="pin-digit" id="np1" maxlength="1" type="password" inputmode="numeric" oninput="newPinInput(1)" onkeydown="newPinKey(event,1)">
        <input class="pin-digit" id="np2" maxlength="1" type="password" inputmode="numeric" oninput="newPinInput(2)" onkeydown="newPinKey(event,2)">
        <input class="pin-digit" id="np3" maxlength="1" type="password" inputmode="numeric" oninput="newPinInput(3)" onkeydown="newPinKey(event,3)">
      </div>
      <button class="btn-confirm" style="width:100%" onclick="changePin()">Save New PIN</button>
      <div class="pin-error" id="newPinError"></div>
    </div>
  </div>
</div>

<!-- ADD ITEM MODAL -->
<div class="overlay" id="overlayItem" onclick="closeItemModal()">
  <div class="modal" onclick="event.stopPropagation()">
    <div class="modal-title">Add Gear Item</div>
    <div class="modal-label">ITEM NAME</div>
    <input id="newName" type="text" placeholder="e.g. Sony FS7 *">
    <div class="modal-label">CATEGORY</div>
    <select id="newCat"><option value="">Select...</option></select>
    <div class="modal-label">TOTAL IN STOCK</div>
    <div class="qty-modal-row">
      <span style="color:#aaa;font-size:13px">How many units do you own?</span>
      <div class="qty-row">
        <button class="sm-btn" onclick="changeNewStock(-1)">‚àí</button>
        <span class="qty-num" id="newStockDisplay">1</span>
        <button class="sm-btn" onclick="changeNewStock(1)">+</button>
      </div>
    </div>
    <div class="modal-btns">
      <button class="btn-cancel" onclick="closeItemModal()">Cancel</button>
      <button class="btn-confirm" onclick="addItem()">Add Item</button>
    </div>
  </div>
</div>

<!-- PEOPLE MODAL -->
<div class="overlay" id="overlayPeople" onclick="closePeopleModal()">
  <div class="modal" onclick="event.stopPropagation()">
    <div class="modal-title">üë• Manage People</div>
    <div class="people-list" id="peopleList"></div>
    <div class="modal-label" style="margin-top:12px">ADD PERSON</div>
    <input id="newPersonName" type="text" placeholder="Name *" onkeydown="if(event.key==='Enter')addPerson()">
    <div class="modal-btns">
      <button class="btn-cancel" onclick="closePeopleModal()">Done</button>
      <button class="btn-confirm" onclick="addPerson()">Add Person</button>
    </div>
  </div>
</div>

<!-- CATEGORIES MODAL -->
<div class="overlay" id="overlayCats" onclick="closeCatsModal()">
  <div class="modal" onclick="event.stopPropagation()">
    <div class="modal-title">üè∑ Manage Categories</div>
    <div id="catsList" style="margin-bottom:14px"></div>
    <div class="modal-label">ADD NEW CATEGORY</div>
    <input id="newCatName" type="text" placeholder="Category name *" onkeydown="if(event.key==='Enter')addCategory()">
    <div class="modal-label">COLOR</div>
    <div id="colorPicker" style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:14px"></div>
    <div class="modal-btns">
      <button class="btn-cancel" onclick="closeCatsModal()">Done</button>
      <button class="btn-confirm" onclick="addCategory()">Add Category</button>
    </div>
  </div>
</div>

<!-- CAT DROPDOWN (floating) -->
<div id="catDropdown" class="cat-dropdown" style="display:none"></div>

<script>
// Detect touch device
if('ontouchstart' in window || navigator.maxTouchPoints > 0){
  document.body.classList.add('is-touch');
}

const STORAGE_KEY = "warehouse_v4";
const DEFAULT_PIN = "8457";
const PRESET_COLORS = ["#FF6B35","#FFD700","#00C9A7","#A78BFA","#F472B6","#94A3B8","#60A5FA","#34D399","#FB923C","#F87171"];

const CAT_COLORS_DEFAULT = { Camera:"#FF6B35", Lighting:"#FFD700", Audio:"#00C9A7", Grip:"#A78BFA", Power:"#F472B6", Other:"#94A3B8" };

const DEFAULT = {
  pin: DEFAULT_PIN,
  items: [
    { id:1, name:"Sony FS7", category:"Camera", stock:2, checkouts:{}, order:0 },
    { id:2, name:"Sony FX6", category:"Camera", stock:1, checkouts:{}, order:1 },
    { id:3, name:"Aputure 600D", category:"Lighting", stock:2, checkouts:{}, order:2 },
    { id:4, name:"Zoom H6", category:"Audio", stock:1, checkouts:{}, order:3 },
    { id:5, name:"Sanken COS-11", category:"Audio", stock:4, checkouts:{}, order:4 },
    { id:6, name:'C-Stand 40"', category:"Grip", stock:6, checkouts:{}, order:5 },
    { id:7, name:"V-Mount Battery", category:"Power", stock:4, checkouts:{}, order:6 },
  ],
  categories: ["Camera","Lighting","Audio","Grip","Power","Other"],
  catColors: { Camera:"#FF6B35", Lighting:"#FFD700", Audio:"#00C9A7", Grip:"#A78BFA", Power:"#F472B6", Other:"#94A3B8" },
  people: ["◊ô◊ï◊°◊ô","◊ì◊†◊ô","◊©◊ô◊®◊î","◊û◊ô◊õ◊ê◊ú"],
  log: [],
  nextId: 100,
  logId: 1
};

// ‚îÄ‚îÄ FIREBASE ‚îÄ‚îÄ
const firebaseConfig = {
  apiKey: "AIzaSyDjcIAweplh1eyI5h0Y1RrHlDeB1zHFE9Q",
  authDomain: "equipment-a5dde.firebaseapp.com",
  databaseURL: "https://equipment-a5dde-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "equipment-a5dde",
  storageBucket: "equipment-a5dde.firebasestorage.app",
  messagingSenderId: "794343673684",
  appId: "1:794343673684:web:eca77438a66ee1ff4842c1"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const DB_REF = db.ref('gearlist');

let state = DEFAULT;
let isSyncing = false;

// Load from localStorage as immediate cache while Firebase loads
try {
  const cached = localStorage.getItem(STORAGE_KEY);
  if(cached){
    const parsed = JSON.parse(cached);
    if(parsed.items && parsed.people) state = parsed;
  }
} catch {}
normalizeState();

// Listen to Firebase in realtime
db.ref('.info/connected').on('value', snap => {
  const connected = snap.val();
  const dot = document.getElementById('liveDot');
  const txt = document.getElementById('liveText');
  if(dot && txt){
    dot.style.background = connected ? '#00C9A7' : '#ff4444';
    dot.style.boxShadow = connected ? '0 0 6px #00C9A7' : 'none';
    txt.textContent = connected ? 'live' : 'offline';
  }
});

DB_REF.on('value', snapshot => {
  const data = snapshot.val();
  if(data){
    state = data;
    normalizeState();
    localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
  } else {
    // First time ‚Äî push defaults to Firebase
    DB_REF.set(state);
  }
  // Update app name if saved
  if(state.appName){ const t=document.getElementById("appLogoText"); if(t) t.textContent=state.appName.replace(/‚ö°\s*/g, "").trim(); }
  render();
});

function normalizeState(){
  if(!state.items) state.items = DEFAULT.items;
  if(!state.people) state.people = DEFAULT.people;
  if(!state.log) state.log = [];
  if(!state.logId) state.logId = (state.log.length||0)+1;
  if(!state.pin || state.pin === "1234") state.pin = DEFAULT_PIN;
  if(!state.catColors) state.catColors = {...CAT_COLORS_DEFAULT};
  if(!state.categories) state.categories = DEFAULT.categories;
  if(!state.projects) state.projects = {};
  if(!state.returnDates) state.returnDates = {};
  state.items = state.items.map((i,idx) => ({ ...i, checkouts:i.checkouts||{}, order: i.order ?? idx }));
}

let isAdmin = false;
let newStock = 1;
let currentTab = "gear";
let selectedNewCatColor = PRESET_COLORS[0];
let dragSrcId = null;

function save(){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
  DB_REF.set(state).catch(e => console.warn('Firebase save error:', e));
}
function cc(cat){ return state.catColors[cat] || "#94A3B8"; }
function takenCount(item){ return Object.values(item.checkouts).reduce((s,v)=>s+(v||0),0); }
function fmtDate(ts){ const d=new Date(ts); return `${String(d.getDate()).padStart(2,'0')}/${String(d.getMonth()+1).padStart(2,'0')}/${d.getFullYear()}`; }
function fmtTime(ts){ const d=new Date(ts); return `${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}`; }

function addLog(person,itemId,itemName,action,qty,project){
  state.log.unshift({ id:state.logId++, ts:Date.now(), person, itemId, itemName, action, qty, project:project||"" });
  if(state.log.length>500) state.log=state.log.slice(0,500);
}

/* ‚îÄ‚îÄ ADMIN ‚îÄ‚îÄ */
function setAdminMode(val){
  isAdmin=val;
  document.getElementById("adminBtn").style.display=val?"none":"block";
  document.getElementById("adminBadge").style.display=val?"inline-block":"none";
  document.getElementById("addItemBtn").style.display=val?"block":"none";
  document.getElementById("manageCatsBtn").style.display=val?"block":"none";
  document.getElementById("peopleBtnHeader").style.display=val?"block":"none";
  document.getElementById("list").classList.toggle("admin-mode",val);

  render();
}
function handleAdminBadge(){ if(confirm("Exit admin mode?")) setAdminMode(false); }

function editAppName(){ /* disabled */ }

/* ‚îÄ‚îÄ PIN ‚îÄ‚îÄ */
function openPinModal(){
  document.getElementById("changePinSection").style.display="none";
  clearPinInputs(); document.getElementById("pinError").textContent="";
  document.getElementById("overlayPin").classList.add("show");
  setTimeout(()=>document.getElementById("p0").focus(),100);
}
function closePinModal(){ document.getElementById("overlayPin").classList.remove("show"); clearPinInputs(); }
function clearPinInputs(){ for(let i=0;i<4;i++){ const el=document.getElementById("p"+i); if(el) el.value=""; } }
function pinInput(i){ const v=document.getElementById("p"+i).value; if(v&&i<3) document.getElementById("p"+(i+1)).focus(); if(i===3&&v) submitPin(); }
function pinKey(e,i){ if(e.key==="Backspace"&&!document.getElementById("p"+i).value&&i>0) document.getElementById("p"+(i-1)).focus(); }
function newPinInput(i){ const v=document.getElementById("np"+i).value; if(v&&i<3) document.getElementById("np"+(i+1)).focus(); }
function newPinKey(e,i){ if(e.key==="Backspace"&&!document.getElementById("np"+i).value&&i>0) document.getElementById("np"+(i-1)).focus(); }
function getPin(prefix){ let p=""; for(let i=0;i<4;i++) p+=document.getElementById((prefix||"p")+i).value||""; return p; }
function submitPin(){
  const entered=getPin("p");
  if(entered===state.pin){
    document.getElementById("pinError").textContent="";
    document.getElementById("changePinSection").style.display="block";
    setTimeout(()=>{ closePinModal(); setAdminMode(true); },400);
  } else {
    document.getElementById("pinError").textContent="‚ùå Wrong PIN"; clearPinInputs(); document.getElementById("p0").focus();
  }
}
function changePin(){
  const np=getPin("np");
  if(np.length!==4||!/^\d{4}$/.test(np)){ document.getElementById("newPinError").textContent="Enter exactly 4 digits"; return; }
  state.pin=np; save(); document.getElementById("newPinError").textContent="";
  addLog("Admin","‚Äî","‚Äî","pin_changed",0);
  alert("‚úì PIN changed!"); for(let i=0;i<4;i++) document.getElementById("np"+i).value="";
}

/* ‚îÄ‚îÄ TABS ‚îÄ‚îÄ */
function setTab(tab){
  currentTab=tab;
  ["gear","people","log"].forEach(t=>document.getElementById("tab-"+t).classList.toggle("active",t===tab));
  render();
}

/* ‚îÄ‚îÄ RENDER ‚îÄ‚îÄ */
function render(){
  const search=document.getElementById("search").value.toLowerCase();
  const filterCatEl=document.getElementById("filterCat");
  const savedFilter=filterCatEl.value||"All";
  filterCatEl.innerHTML='<option value="All">All</option>';
  state.categories.forEach(c=>{ const o=document.createElement("option"); o.value=c; o.textContent=c; if(c===savedFilter) o.selected=true; filterCatEl.appendChild(o); });
  const totalStock=state.items.reduce((s,i)=>s+i.stock,0);
  const totalOut=state.items.reduce((s,i)=>s+takenCount(i),0);
  const pct=totalStock?Math.round((totalOut/totalStock)*100):0;
  document.getElementById("subtitle").textContent=`${totalOut} / ${totalStock} units out ¬∑ ${pct}% deployed`;
  document.getElementById("progress").style.width=`${pct}%`;
  document.getElementById("footer").style.display=(totalOut>0&&isAdmin)?"block":"none";
  if(currentTab==="gear") renderGear(search,savedFilter);
  else if(currentTab==="people") renderPeople();
  else renderLog();
}

/* ‚îÄ‚îÄ GEAR ‚îÄ‚îÄ */
function renderGear(search,filterCat){
  const CAT_ORDER = ["camera","lighting","grip","sound","audio"];
  function catPriority(cat){
    const idx = CAT_ORDER.indexOf((cat||"").toLowerCase());
    return idx >= 0 ? idx : 999;
  }
  let list = [...state.items]
    .filter(i=>i.name.toLowerCase().includes(search)&&(filterCat==="All"||i.category===filterCat))
    .sort((a,b)=>{
      const pa = catPriority(a.category), pb = catPriority(b.category);
      if(pa !== pb) return pa - pb;
      const catA = (a.category||"").toLowerCase();
      const catB = (b.category||"").toLowerCase();
      if(catA !== catB) return catA.localeCompare(catB);
      return (a.order??0)-(b.order??0);
    });

  const listEl=document.getElementById("list");
  listEl.classList.toggle("admin-mode",isAdmin);
  if(!list.length){ listEl.innerHTML='<div class="empty">No gear found. üé¨</div>'; return; }

  listEl.innerHTML=list.map(item=>{
    const color=cc(item.category);
    const taken=takenCount(item);
    const free=Math.max(0,item.stock-taken);
    const activeTakers=state.people.filter(p=>(item.checkouts[p]||0)>0);
    const availPeople=state.people.filter(p=>!(item.checkouts[p]||0));

    const dragAttr="";
    const handleHTML=isAdmin?`
      <span class="drag-handle desktop-only">‚†ø</span>
      <div class="move-btns mobile-only">
        <button class="move-btn" onclick="moveItem(${item.id},-1);event.stopPropagation()">‚ñ≤</button>
        <button class="move-btn" onclick="moveItem(${item.id},1);event.stopPropagation()">‚ñº</button>
      </div>`:"";
    const nameEl=isAdmin
      ?`<span class="item-name editable" title="Click to rename" onclick="startRename(${item.id},this)">${item.name}</span>`
      :`<span class="item-name">${item.name}</span>`;
    const catEl=isAdmin
      ?`<span class="cat-tag editable" style="background:${color}22;color:${color};border:1px solid ${color}44" title="Click to change category" onclick="openCatDropdown(event,${item.id})">${item.category} ‚ñæ</span>`
      :`<span class="cat-tag" style="background:${color}22;color:${color};border:1px solid ${color}44">${item.category}</span>`;
    const delBtn=isAdmin?`<button class="del-btn" onclick="deleteItem(${item.id})">‚úï</button>`:"";
    const stockPill=isAdmin
      ?`<div class="pill p-stock"><span class="plabel">STOCK</span><span class="pval">${item.stock}</span></div>
        <div class="stock-edit">
          <button class="sm-btn" onclick="changeStock(${item.id},-1)">‚àí</button>
          <button class="sm-btn" onclick="changeStock(${item.id},1)">+</button>
        </div>`
      :`<div class="pill p-stock"><span class="plabel">STOCK</span><span class="pval">${item.stock}</span></div>`;

    const takerRows=activeTakers.map(p=>`
      <div class="taker-row">
        <span class="taker-name">üë§ ${p}</span>
        <div class="taker-qty">
          <button class="sm-btn" onclick="changeCheckout(${item.id},'${p}',-1)">‚àí</button>
          <span class="taker-count">${item.checkouts[p]}</span>
          <button class="sm-btn" onclick="changeCheckout(${item.id},'${p}',1)">+</button>
        </div>
      </div>`).join("");

    const assignRow=availPeople.length&&free>0?`
      <div class="taker-row" style="margin-top:4px">
        <select class="assign-select" onchange="addTaker(${item.id},this)">
          <option value="">+ Assign to person...</option>
          ${availPeople.map(p=>`<option value="${p}">${p}</option>`).join("")}
        </select>
      </div>`:"";

    return `
    <div class="item-card" id="card-${item.id}" ${dragAttr} ${isAdmin?`data-id="${item.id}"`:""}>
      <div class="card-header">
        <div class="card-title">${handleHTML}${nameEl}${catEl}</div>
        <div class="card-actions">${delBtn}</div>
      </div>
      <div class="stock-pills">${stockPill}
        <div class="pill p-free"><span class="plabel">FREE</span><span class="pval">${free}</span></div>
        <div class="pill p-out"><span class="plabel">OUT</span><span class="pval">${taken}</span></div>
      </div>
      <div class="takers-section">
        <div class="takers-title">WHO HAS IT</div>
        ${takerRows||'<div style="color:#444;font-size:11px;margin-bottom:4px">Nobody took this yet</div>'}
        ${assignRow}
      </div>
    </div>`;
  }).join("");
  setTimeout(initDrag, 0);
}

/* ‚îÄ‚îÄ DRAG TO REORDER (HTML5 native) ‚îÄ‚îÄ */
let _srcId = null;

function moveItem(id, dir){
  const sorted = [...state.items].sort((a,b)=>(a.order??0)-(b.order??0));
  const idx = sorted.findIndex(i=>i.id===id);
  const swapIdx = idx + dir;
  if(swapIdx < 0 || swapIdx >= sorted.length) return;
  const tmp = sorted[idx].order ?? idx;
  sorted[idx].order = sorted[swapIdx].order ?? swapIdx;
  sorted[swapIdx].order = tmp;
  save(); render();
}

function initDrag(){
  if(!isAdmin) return;
  document.querySelectorAll('.item-card[data-id]').forEach(card=>{
    card.setAttribute('draggable','true');
    card.ondragstart = e => {
      _srcId = parseInt(card.dataset.id);
      card.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    };
    card.ondragend = e => {
      card.classList.remove('dragging');
      document.querySelectorAll('.item-card').forEach(c=>c.classList.remove('drag-over'));
    };
    card.ondragover = e => {
      e.preventDefault();
      e.dataTransfer.dropEffect = 'move';
      document.querySelectorAll('.item-card').forEach(c=>c.classList.remove('drag-over'));
      card.classList.add('drag-over');
    };
    card.ondragleave = e => card.classList.remove('drag-over');
    card.ondrop = e => {
      e.preventDefault();
      card.classList.remove('drag-over');
      const tgtId = parseInt(card.dataset.id);
      if(_srcId === null || _srcId === tgtId) return;
      const src = state.items.find(i=>i.id===_srcId);
      const tgt = state.items.find(i=>i.id===tgtId);
      if(src && tgt){
        const tmp = src.order ?? 0;
        src.order = tgt.order ?? 0;
        tgt.order = tmp;
        save(); render();
      }
      _srcId = null;
    };
  });
}

/* ‚îÄ‚îÄ CATEGORY DROPDOWN ‚îÄ‚îÄ */
function openCatDropdown(e,itemId){
  e.stopPropagation();
  const dd=document.getElementById("catDropdown");
  dd.innerHTML=state.categories.map(c=>`
    <div class="cat-dropdown-item" onclick="changeItemCat(${itemId},'${c}')">
      <div class="cat-dot" style="background:${cc(c)}"></div>${c}
    </div>`).join("")+
    `<div class="cat-dropdown-sep"></div>
     <div class="cat-dropdown-item" onclick="closeCatDropdown();openCatsModal()">
       <span style="color:#A78BFA">+ New category...</span>
     </div>`;
  const rect=e.target.getBoundingClientRect();
  dd.style.top=(rect.bottom+window.scrollY+4)+"px";
  dd.style.left=(rect.left+window.scrollX)+"px";
  dd.style.display="block";
  dd._itemId=itemId;
  setTimeout(()=>document.addEventListener("click",closeCatDropdownOnce),10);
}
function closeCatDropdown(){ document.getElementById("catDropdown").style.display="none"; }
function closeCatDropdownOnce(){ closeCatDropdown(); document.removeEventListener("click",closeCatDropdownOnce); }
function changeItemCat(itemId,cat){
  const item=state.items.find(i=>i.id===itemId);
  if(!item||item.category===cat) return;
  addLog("Admin",itemId,item.name,"cat_changed",0);
  item.category=cat; save(); render();
}

/* ‚îÄ‚îÄ CATEGORIES MODAL ‚îÄ‚îÄ */
function openCatsModal(){
  selectedNewCatColor=PRESET_COLORS[0];
  renderCatsList(); renderColorPicker();
  document.getElementById("overlayCats").classList.add("show");
}
function closeCatsModal(){ document.getElementById("overlayCats").classList.remove("show"); render(); }

function renderCatsList(){
  document.getElementById("catsList").innerHTML=state.categories.map(c=>`
    <div class="cat-list-item" id="catrow-${c.replace(/[^a-z0-9]/gi,'_')}">
      <div style="display:flex;align-items:center;flex:1;min-width:0;gap:6px">
        <div class="cat-color-dot" style="background:${cc(c)};cursor:pointer;flex-shrink:0" onclick="pickCatColor('${c}')" title="Change color"></div>
        <span class="cat-name-label" style="font-size:13px;cursor:pointer;border-bottom:1px dashed #444" onclick="startCatRename('${c}',this)" title="Click to rename">${c}</span>
        <span style="font-size:10px;color:#555;margin-left:4px">${state.items.filter(i=>i.category===c).length} items</span>
      </div>
      <button onclick="deleteCategory('${c}')" style="background:transparent;border:1px solid #333;color:#666;border-radius:6px;padding:3px 10px;cursor:pointer;font-size:11px;font-family:inherit;flex-shrink:0" onmouseover="this.style.borderColor='#ff4444';this.style.color='#ff4444'" onmouseout="this.style.borderColor='#333';this.style.color='#666'">Remove</button>
    </div>`).join("");
}

function startCatRename(oldName, el){
  const input = document.createElement("input");
  input.value = oldName;
  input.style.cssText = "background:#0D0D0F;border:1px solid #FF6B35;border-radius:5px;padding:2px 7px;color:#F0EDE8;font-size:13px;font-family:inherit;outline:none;width:120px";
  el.replaceWith(input);
  input.focus(); input.select();
  function commit(){
    const newName = input.value.trim();
    if(!newName || newName === oldName){ renderCatsList(); return; }
    if(state.categories.includes(newName)){ alert("Category already exists!"); renderCatsList(); return; }
    // rename in categories list
    const idx = state.categories.indexOf(oldName);
    if(idx !== -1) state.categories[idx] = newName;
    // rename color
    state.catColors[newName] = state.catColors[oldName];
    delete state.catColors[oldName];
    // rename in all items
    state.items.forEach(i=>{ if(i.category===oldName) i.category=newName; });
    addLog("Admin","‚Äî",oldName,"cat_renamed",0);
    save(); renderCatsList(); render();
  }
  input.addEventListener("blur", commit);
  input.addEventListener("keydown", e=>{ if(e.key==="Enter") input.blur(); if(e.key==="Escape"){ input.value=oldName; input.blur(); } });
}

function pickCatColor(catName){
  const existingPicker = document.getElementById("inlineCatColorPicker");
  if(existingPicker){ existingPicker.remove(); if(existingPicker.dataset.cat===catName) return; }
  const picker = document.createElement("div");
  picker.id = "inlineCatColorPicker";
  picker.dataset.cat = catName;
  picker.style.cssText = "display:flex;align-items:center;gap:10px;flex-wrap:wrap;padding:10px;background:#1A1A1F;border:1px solid #2A2A30;border-radius:10px;margin:6px 0 4px;";
  
  // Native color input
  const colorInput = document.createElement("input");
  colorInput.type = "color";
  colorInput.value = cc(catName);
  colorInput.style.cssText = "width:44px;height:44px;border-radius:8px;border:2px solid #2A2A30;background:none;cursor:pointer;padding:2px;flex-shrink:0";
  colorInput.oninput = ()=>{
    state.catColors[catName] = colorInput.value;
    save(); renderCatsList(); render();
  };
  picker.appendChild(colorInput);

  // Preset dots
  const dotsWrap = document.createElement("div");
  dotsWrap.style.cssText = "display:flex;gap:6px;flex-wrap:wrap";
  PRESET_COLORS.forEach(c=>{
    const dot = document.createElement("div");
    dot.style.cssText = `width:26px;height:26px;border-radius:50%;background:${c};cursor:pointer;border:3px solid ${c===cc(catName)?"#fff":"transparent"};flex-shrink:0`;
    dot.onclick = ()=>{
      state.catColors[catName] = c;
      colorInput.value = c;
      save(); renderCatsList(); render();
    };
    dotsWrap.appendChild(dot);
  });
  picker.appendChild(dotsWrap);

  const row = document.getElementById("catrow-"+catName.replace(/[^a-z0-9]/gi,'_'));
  if(row) row.insertAdjacentElement("afterend", picker);
}

function renderColorPicker(){
  document.getElementById("colorPicker").innerHTML=`
    <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap">
      <input type="color" id="colorInput" value="${selectedNewCatColor}" 
        style="width:48px;height:48px;border-radius:10px;border:2px solid #2A2A30;background:none;cursor:pointer;padding:2px"
        oninput="selectColor(this.value)">
      <div style="display:flex;gap:6px;flex-wrap:wrap">
        ${PRESET_COLORS.map(c=>`<div onclick="selectColor('${c}');document.getElementById('colorInput').value='${c}'" 
          style="width:26px;height:26px;border-radius:50%;background:${c};cursor:pointer;border:3px solid ${c===selectedNewCatColor?'#fff':'transparent'};flex-shrink:0" 
          id="colorBtn-${c.replace('#','')}"></div>`).join("")}
      </div>
    </div>`;
}

function selectColor(c){
  selectedNewCatColor=c;
  PRESET_COLORS.forEach(p=>{
    const el=document.getElementById("colorBtn-"+p.replace("#",""));
    if(el) el.style.borderColor=p===c?"#fff":"transparent";
  });
}

function addCategory(){
  const name=document.getElementById("newCatName").value.trim();
  if(!name||state.categories.includes(name)) return;
  state.categories.push(name);
  state.catColors[name]=selectedNewCatColor;
  document.getElementById("newCatName").value="";
  save(); renderCatsList();
}

function deleteCategory(name){
  const count=state.items.filter(i=>i.category===name).length;
  if(count>0){ alert(`Cannot remove "${name}" ‚Äî ${count} item(s) still using it. Reassign them first.`); return; }
  state.categories=state.categories.filter(c=>c!==name);
  delete state.catColors[name];
  save(); renderCatsList(); render();
}

/* ‚îÄ‚îÄ INLINE RENAME ‚îÄ‚îÄ */
function startRename(id,el){
  const item=state.items.find(i=>i.id===id); if(!item) return;
  const input=document.createElement("input");
  input.className="inline-edit"; input.value=item.name;
  el.replaceWith(input); input.focus(); input.select();
  function commit(){
    const n=input.value.trim()||item.name;
    if(n!==item.name){ addLog("Admin",id,item.name,"renamed",0); item.name=n; save(); }
    render();
  }
  input.addEventListener("blur",commit);
  input.addEventListener("keydown",e=>{ if(e.key==="Enter") input.blur(); if(e.key==="Escape"){ input.value=item.name; input.blur(); } });
}

/* ‚îÄ‚îÄ STOCK ‚îÄ‚îÄ */
function changeStock(id,delta){
  const item=state.items.find(i=>i.id===id); if(!item) return;
  const ns=Math.max(takenCount(item),item.stock+delta);
  if(ns===item.stock) return;
  addLog("Admin",id,item.name,delta>0?"stock_added":"stock_removed",Math.abs(delta));
  item.stock=ns; save(); render();
}

/* ‚îÄ‚îÄ PEOPLE TAB ‚îÄ‚îÄ */
function renderPeople(){
  const listEl=document.getElementById("list");
  listEl.classList.remove("admin-mode");
  listEl.innerHTML=state.people.map(person=>{
    const theirItems=state.items.filter(i=>(i.checkouts[person]||0)>0);
    const totalOut=theirItems.reduce((s,i)=>s+(i.checkouts[person]||0),0);
    if(!theirItems.length) return `
      <div class="person-card"><div class="person-header">
        <span class="person-name-big">üë§ ${person}</span>
        <span style="font-size:11px;color:#444">Nothing out</span>
      </div></div>`;
    return `
      <div class="person-card">
        <div class="person-header">
          <span class="person-name-big">üë§ ${person}</span>
          <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
            <span class="person-badge">${totalOut} unit${totalOut>1?'s':''} out</span>
            ${(()=>{
              const d = state.returnDates&&state.returnDates[person];
              if(!d) return '';
              const today = new Date(); today.setHours(0,0,0,0);
              const ret = new Date(d);
              const overdue = ret < today;
              const color = overdue ? '#ff0000' : '#60A5FA';
              const label = overdue ? '‚ö†Ô∏è OVERDUE ' : 'üìÖ ';
              return `<span style="font-size:10px;color:${color};background:${color}22;border:1px solid ${color}44;border-radius:20px;padding:2px 8px">${label}${d}</span>`;
            })()}
            <button class="return-btn" onclick="returnAllFromPerson('${person}')" style="border-color:#00C9A7;color:#00C9A7;font-size:11px;padding:3px 10px">‚Ü∫ Return all</button>
          </div>
        </div>
        <div class="person-items">
          ${theirItems.map(i=>`
            <div class="person-item-row">
              <span style="font-size:13px;color:#ccc">${i.name}</span>
              <div style="display:flex;align-items:center;gap:8px">
                <span style="font-size:13px;font-weight:700;color:#FF6B35">√ó ${i.checkouts[person]}</span>
                <button class="return-btn" onclick="returnAll(${i.id},'${person}')">Return</button>
              </div>
            </div>`).join("")}
        </div>
        <div class="project-row">
          <div class="project-label">PROJECT / SHOOT NAME</div>
          <input class="project-input" 
            placeholder="e.g. Wedding TLV, Music Video..." 
            value="${state.projects&&state.projects[person]||''}"
            onblur="saveProject('${person}',this.value)"
            onkeydown="if(event.key==='Enter')this.blur()"
            onclick="event.stopPropagation()">
          <div class="project-label" style="margin-top:8px">RETURN DATE</div>
          <input class="project-input" type="date"
            value="${state.returnDates&&state.returnDates[person]||''}"
            onchange="saveReturnDate('${person}',this.value)"
            onclick="event.stopPropagation()"
            style="color-scheme:dark">
        </div>
      </div>`;
  }).join("")||'<div class="empty">No people added yet.</div>';
}

/* ‚îÄ‚îÄ LOG ‚îÄ‚îÄ */
function renderLog(){
  const listEl=document.getElementById("list");
  listEl.classList.remove("admin-mode");
  if(!state.log.length){ listEl.innerHTML='<div class="empty">No activity yet. üìã</div>'; return; }
  const byDay={};
  state.log.forEach(e=>{ const k=fmtDate(e.ts); if(!byDay[k]) byDay[k]=[]; byDay[k].push(e); });
  const clearBtn=isAdmin?`<button onclick="clearLog()" style="background:transparent;border:1px solid #2A2A30;color:#555;border-radius:6px;padding:4px 10px;cursor:pointer;font-size:11px;font-family:inherit">üóë Clear</button>`:"";
  listEl.innerHTML=`<div style="padding:10px 14px 4px;display:flex;justify-content:space-between;align-items:center">
    <span style="font-size:11px;color:#555">${state.log.length} events</span>${clearBtn}</div>`+
    Object.entries(byDay).map(([day,entries])=>`
      <div class="log-day"><div class="log-day-title">üìÖ ${day}</div>
        ${entries.map(e=>{
          const isOut=e.action==="out";
          const isAdm=["renamed","stock_added","stock_removed","pin_changed","cat_changed","cat_renamed","item_added","person_renamed"].includes(e.action);
          let txt;
          if(e.action==="out") txt=`<span class="log-qty-out">took ${e.qty}√ó</span> <span style="color:#F0EDE8">${e.itemName}</span>`;
          else if(e.action==="in") txt=`<span class="log-qty-in">returned ${e.qty}√ó</span> <span style="color:#F0EDE8">${e.itemName}</span>${e.project?` <span style='color:#555'>¬∑ ${e.project}</span>`:""}` ;
          else if(e.action==="renamed") txt=`<span class="log-qty-admin">renamed</span> <span style="color:#F0EDE8">${e.itemName}</span>`;
          else if(e.action==="stock_added") txt=`<span class="log-qty-admin">+${e.qty} stock</span> <span style="color:#F0EDE8">${e.itemName}</span>`;
          else if(e.action==="stock_removed") txt=`<span class="log-qty-admin">‚àí${e.qty} stock</span> <span style="color:#F0EDE8">${e.itemName}</span>`;
          else if(e.action==="cat_changed") txt=`<span class="log-qty-admin">changed category of</span> <span style="color:#F0EDE8">${e.itemName}</span>`;
          else if(e.action==="cat_renamed") txt=`<span class="log-qty-admin">renamed category</span> <span style="color:#F0EDE8">${e.itemName}</span>`;
          else if(e.action==="item_added") txt=`<span class="log-qty-admin">added item</span> <span style="color:#F0EDE8">${e.itemName}</span>`;
          else if(e.action==="pin_changed") txt=`<span class="log-qty-admin">changed PIN</span>`;
          else if(e.action==="return_date_set") txt=`<span class="log-qty-admin">set return date</span> <span style="color:#60A5FA">${e.project}</span>`;
          else if(e.action==="project_set") txt=`<span style="color:#FFD700">set project</span> <span style="color:#F0EDE8">${e.itemName}</span>`;
          else if(e.action==="person_renamed") txt=`<span class="log-qty-admin">renamed person</span> <span style="color:#F0EDE8">${e.itemName}</span>`;
          else txt=e.action;
          const dot=isAdm?"#A78BFA":isOut?"#FF6B35":"#00C9A7";
          return `<div class="log-entry">
            <span class="log-time">${fmtTime(e.ts)}</span>
            <div class="log-dot" style="background:${dot}"></div>
            <div class="log-body">
              <div class="log-person">${isAdm?"üîê Admin":"üë§ "+e.person}</div>
              <div class="log-action">${txt}</div>
            </div>
            ${isAdmin?`<button onclick="deleteLogEntry(${e.id})" style="background:transparent;border:none;color:#333;font-size:14px;cursor:pointer;padding:2px 6px;flex-shrink:0;line-height:1" onmouseover="this.style.color='#ff4444'" onmouseout="this.style.color='#333'">‚úï</button>`:""}
            </div>`; }).join("")}
      </div>`).join("");
}

/* ‚îÄ‚îÄ ACTIONS ‚îÄ‚îÄ */
function changeCheckout(itemId,person,delta){
  const item=state.items.find(i=>i.id===itemId); if(!item) return;
  const current=item.checkouts[person]||0;
  const free=item.stock-takenCount(item);
  if(delta>0&&free<=0) return;
  const next=Math.max(0,current+delta);
  const actualDelta=next-current; if(actualDelta===0) return;
  if(next===0) delete item.checkouts[person]; else item.checkouts[person]=next;
  addLog(person,itemId,item.name,actualDelta>0?"out":"in",Math.abs(actualDelta));
  save(); render();
}
function addTaker(itemId,sel){ const p=sel.value; if(!p) return; changeCheckout(itemId,p,1); sel.value=""; }
function returnAll(itemId,person){
  const item=state.items.find(i=>i.id===itemId); if(!item||!item.checkouts[person]) return;
  const qty=item.checkouts[person]; delete item.checkouts[person];
  addLog(person,itemId,item.name,"in",qty); save(); render();
}
function saveReturnDate(person, val){
  if(!state.returnDates) state.returnDates={};
  if(val){
    state.returnDates[person]=val;
    addLog(person,"‚Äî",person,"return_date_set",0,val);
  } else {
    delete state.returnDates[person];
  }
  save();
}

function saveProject(person, val){
  if(!state.projects) state.projects={};
  const trimmed = val.trim();
  if(trimmed){
    state.projects[person]=trimmed;
    addLog(person,"‚Äî",trimmed,"project_set",0,"");
  } else {
    delete state.projects[person];
  }
  save();
}

function returnAllFromPerson(person){
  const project = state.projects&&state.projects[person]||"";
  state.items.forEach(item=>{
    const qty=item.checkouts[person]||0;
    if(qty>0){ delete item.checkouts[person]; addLog(person,item.id,item.name,"in",qty,project); }
  });
  if(state.projects) delete state.projects[person];
  if(state.returnDates) delete state.returnDates[person];
  save(); render();
}
function deleteItem(id){ if(!isAdmin) return; state.items=state.items.filter(i=>i.id!==id); save(); render(); }
function resetAll(){
  state.items.forEach(item=>{ Object.entries(item.checkouts).forEach(([p,q])=>{ if(q>0) addLog(p,item.id,item.name,"in",q); }); item.checkouts={}; });
  save(); render();
}
function deleteLogEntry(id){
  state.log = state.log.filter(e=>e.id!==id);
  save(); render();
}
function clearLog(){ if(confirm("Clear all log history?")){ state.log=[]; save(); render(); } }

/* ‚îÄ‚îÄ ADD ITEM MODAL ‚îÄ‚îÄ */
function openAddItemModal(){
  const el=document.getElementById("newCat");
  el.innerHTML='<option value="">Select...</option>';
  state.categories.forEach(c=>{ const o=document.createElement("option"); o.value=c; o.textContent=c; el.appendChild(o); });
  document.getElementById("overlayItem").classList.add("show");
  setTimeout(()=>document.getElementById("newName").focus(),100);
}
function closeItemModal(){
  document.getElementById("overlayItem").classList.remove("show");
  document.getElementById("newName").value="";
  newStock=1; document.getElementById("newStockDisplay").textContent="1";
}
function changeNewStock(d){ newStock=Math.max(1,newStock+d); document.getElementById("newStockDisplay").textContent=newStock; }
function addItem(){
  const name=document.getElementById("newName").value.trim();
  if(!name){ document.getElementById("newName").style.borderColor="#ff4444"; return; }
  document.getElementById("newName").style.borderColor="#2A2A30";
  const sc=document.getElementById("newCat").value||state.categories[0];
  // Place new item at end of its category group
  const samecat = state.items.filter(i=>i.category===sc);
  const maxCatOrder = samecat.length ? Math.max(...samecat.map(i=>i.order??0)) : -1;
  // If no items in this category yet, find where this category would sit alphabetically
  // and place it after all items of preceding categories
  let newOrder;
  if(samecat.length > 0){
    newOrder = maxCatOrder + 1;
    // shift all items with order > maxCatOrder up by 1
    state.items.forEach(i=>{ if((i.order??0) > maxCatOrder) i.order = (i.order??0) + 1; });
  } else {
    const maxOrder = state.items.reduce((m,i)=>Math.max(m,i.order??0), -1);
    newOrder = maxOrder + 1;
  }
  state.items.push({id:state.nextId++,name,category:sc,stock:newStock,checkouts:{},order:newOrder});
  addLog("Admin",state.nextId-1,name,"item_added",newStock);
  save(); closeItemModal(); render();
}

/* ‚îÄ‚îÄ PEOPLE MODAL ‚îÄ‚îÄ */
function openPeopleModal(){ renderPeopleList(); document.getElementById("overlayPeople").classList.add("show"); }
function closePeopleModal(){ document.getElementById("overlayPeople").classList.remove("show"); render(); }
function renderPeopleList(){
  document.getElementById("peopleList").innerHTML=state.people.map(p=>`
    <div class="person-row" id="prow-${p.replace(/[^a-z0-9]/gi,'_')}">
      <span style="font-size:14px;cursor:pointer;border-bottom:1px dashed #444" onclick="startPersonRename('${p}',this)" title="Click to rename">üë§ ${p}</span>
      <button onclick="removePerson('${p}')" style="background:transparent;border:1px solid #333;color:#aaa;border-radius:6px;padding:3px 10px;cursor:pointer;font-size:11px;font-family:inherit">Remove</button>
    </div>`).join("")||'<div style="color:#444;font-size:12px;padding:8px 0">No people yet.</div>';
}
function startPersonRename(oldName, el){
  const input = document.createElement("input");
  input.value = oldName;
  input.style.cssText = "background:#0D0D0F;border:1px solid #FF6B35;border-radius:5px;padding:2px 7px;color:#F0EDE8;font-size:13px;font-family:inherit;outline:none;width:130px";
  el.replaceWith(input);
  input.focus(); input.select();
  function commit(){
    const newName = input.value.trim();
    if(!newName || newName===oldName){ renderPeopleList(); return; }
    if(state.people.includes(newName)){ alert("Name already exists!"); renderPeopleList(); return; }
    const idx = state.people.indexOf(oldName);
    if(idx !== -1) state.people[idx] = newName;
    // update checkouts
    state.items.forEach(item=>{
      if(item.checkouts[oldName] !== undefined){
        item.checkouts[newName] = item.checkouts[oldName];
        delete item.checkouts[oldName];
      }
    });
    addLog("Admin","‚Äî",oldName,"person_renamed",0);
    save(); renderPeopleList(); render();
  }
  input.addEventListener("blur", commit);
  input.addEventListener("keydown", e=>{ if(e.key==="Enter") input.blur(); if(e.key==="Escape"){ input.value=oldName; input.blur(); } });
}

function addPerson(){
  const name=document.getElementById("newPersonName").value.trim();
  if(!name||state.people.includes(name)) return;
  state.people.push(name); document.getElementById("newPersonName").value="";
  save(); renderPeopleList();
}
function removePerson(name){
  if(state.items.some(i=>(i.checkouts[name]||0)>0)){ if(!confirm(`${name} still has gear. Remove anyway?`)) return; }
  state.people=state.people.filter(p=>p!==name);
  state.items.forEach(i=>delete i.checkouts[name]);
  save(); renderPeopleList();
}

// Firebase listener handles initial render
</script>
<div style="text-align:center;padding:14px 0 6px;font-size:10px;color:#2A2A2A;letter-spacing:1px;user-select:none;pointer-events:none">By Fredy Miskin</div>
</body>
</html>
